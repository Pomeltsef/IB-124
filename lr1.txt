Лабораторная работа №1
Пользователи и группы в Linux

Цель: ознакомиться с правилами пользователей и группю Изучитть права доступа к объектам в OC Linux

1. Информация о пользвоателях доступна в файле /etc/passwd
Просмотр файла:
vim /etc/passwd

Указаны имя пользователя, номер пользователя, номер группы, домашний каталог, командная  оболочка

Информация о группах доступна в файле /etc/group
vim /etc/group
Указаны имя группы и номер группы

Закрытая для пользователей информация о паролях для администратора в файле /etc/shadow
sudo /etc/shadow
Имя пользователя, пароль (или "!" в случае блокирования учетной записи), временные настройки учетной записи (время до смены пароля, время жизни записи и т.д.)

Закрытая для пользователей информация о паролях для групп доступна для администратора в файле /etc/gshadow
sudo /etc/gshadow
"!" - означает отсутствие пароля для группы

Права доступа к любому объекту устанавливаются администратором при помощи команды chmod
1 Вариант:
sudo chmod 775 /home/tmp3
Установили полный доступ к каталогу /home/tmp3  для владельца каталога и группы владельца, а для всех остальных пользователей право на просмотр (x) и чтение каталога (r)
2 вариант:
sudo chmod o+w /home/tmp3
Установили право для всех пользователей на запись в каталог /home/tmp3
Убрали право на запись у группы владельца каталога /home/tmp3
Владельца и группу владельца любого объекта администратора можно поменять при помощи команды chmod
sudo chown tmp4: student /home/tmp3/f1
Изменили владельца каталога /home/tmp3/F1 на пользователя tmp4, а группу владельца на группу student
sudo chown: tmp4 /home/tmp3/readme
Изменили группу владельца файлов /home/tmp3/readme на группу tmp4

Для  работы в других (существубщих) группах можно использовать команду newgr
newgr tmp5
Для смены группы необходимо знать парроль группы
После смены группы можно получитть общий доступ к объектам по группе владельцев каждого объекта
После завершения операцией под общей группой, выход из группы в свою группу по умолчанию осуществляется коммандой exit


Расширенные права SUID, GUID, sticky bit
Бит  SUID позволяет выполнять файл от имени владельца файла
Эта возмржность используется для предоставления дополнительных прав процессу, когда необходимо обращение к недостпуным для обычных пользователей ресурсов (например, для записи в файл /etc/shadow при смене пароля)
Установка бита осуществляется командой chmod:

sudo chmod u+s <имя файла>
sudo chmod 4xxx (4775) <имя файла>

Установленный бит отображается буквой s в разрешениях запуска для владельца файла:
Доступ: (4755/-rwsr-xr-x)

Если владелец не имеет прав доступа к выполнению файла, установленный бит отображается прописной буквой s:
Доступ: (4655/-rwSr-xr-x)

SUID имеет смысл устанавливать для файлов но не для папок.

Бит GUID позволяет запускать файл от имени группы владельцев, а также может влиять на режимы доступа к объектам, находящимся внутри папки с установленным битом GUID

Установки бита осуществляется командой chmod: 

sudo chmod g+s имя файла или имя папки
sudo chmod 2775 имя файла или папки

При установке GUID на папку все объекты, созданные после этого внутри этой папки, наследуют группу владельцев

Установленный бит отображается буквой s в разрешениях для запуска для группы владельцев:
Доступ: (2774/-rwxrwsr--) - для файла
Доступ: (2775/drwxrwsr-x) - для папки

Каталоги внутри папки с установенным GUID-битом получают такую же группу владельцев и установленный GUID-бит.

